webpackJsonp([4],{"3cXf":function(t,e,s){t.exports={default:s("q1bu"),__esModule:!0}},JSaR:function(t,e){},LrVr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),n=s.n(a),i=s("Muz9"),r=s.n(i),o=s("qvKF"),c=s("qqHy"),u=s.n(c),l={name:"Sou",components:{Head:o.a},data:function(){return{val:"",city_name:{},history:[],shuju:[],show:!1}},methods:{search:function(){var t=this;this.show=!0;var e="http://elm.cangdu.org/v1/pois?type=search&city_id="+this.$route.query.id+"&keyword="+this.val;r.a.get(e).then(function(e){t.history=e.data}),u()(".s_h").css({display:"none"})},shis:function(t){this.show=!1;var e=JSON.parse(localStorage.getItem("data"))||[],s={name:t.name,address:t.address,geohash:t.geohash};this.$store.commit("add",t.geohash);var a=e.findIndex(function(e,s,a){return t.name==e.name});if(this.$router.push({path:"/Shou/Take",query:{geohash:t.geohash}}),-1!=a)return!1;e.push(s),localStorage.setItem("data",n()(e))},clear:function(){var t=JSON.parse(localStorage.getItem("data"));t=[],this.shuju=t,localStorage.setItem("data",n()(t))},chuan:function(t){this.$router.push("/Shou/My?name="+t.name)}},mounted:function(){var t=this,e=this.$route.query.id,s="http://elm.cangdu.org/v1/cities/"+e;r.a.get(s).then(function(s){t.city_name=void 0==e?"":s.data});var a=JSON.parse(localStorage.getItem("data"))||[];this.shuju=a}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"sou"}},[s("header",[s("Head",[s("div",{staticClass:"he sou_he",attrs:{slot:"a"},slot:"a"},[s("div",{staticClass:"left"},[s("a-Icon",{attrs:{type:"left"},on:{click:function(e){return t.$router.go(-1)}}})],1),t._v(" "),s("div",{staticClass:"content"},[t._v(t._s(t.city_name.name))]),t._v(" "),s("div",{staticClass:"right"},[s("router-link",{attrs:{to:"/Ding"}},[t._v("切换城市")])],1)])])],1),t._v(" "),s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],attrs:{type:"text",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}}),t._v(" "),s("input",{attrs:{type:"button",value:"提交"},on:{click:function(e){return t.search()}}})]),t._v(" "),s("div",{staticClass:"history"},[s("div",{staticClass:"s_h"},[t._v("搜索历史")]),t._v(" "),t._l(t.history,function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.show,expression:"show==true"}],key:a,staticClass:"s_nei",on:{click:function(s){return t.shis(e)}}},[s("div",{staticStyle:{color:"black"}},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"s_n"},[t._v(t._s(e.address))])])}),t._v(" "),t._l(t.shuju,function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.show,expression:"show==false"}],key:a,staticClass:"s_nei his",on:{click:function(s){return t.shis(e)}}},[s("div",{staticStyle:{color:"black"},on:{click:function(s){return t.chuan(e)}}},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"s_n"},[t._v(t._s(e.address))])])})],2),t._v(" "),s("div",{staticClass:"clear",on:{click:function(e){return t.clear()}}},[t._v("清空所有")])])},staticRenderFns:[]};var v=s("C7Lr")(l,h,!1,function(t){s("JSaR")},null,null);e.default=v.exports},q1bu:function(t,e,s){var a=s("Rv9F"),n=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}});
//# sourceMappingURL=4.e346b48372d2057441ee.js.map